# Polymarket Whales Bot üêã

[üá∑üá∫ –†—É—Å—Å–∫–∏–π](#-—Ä—É—Å—Å–∫–∏–π) | [üá¨üáß English](#-english)

---

## üá∑üá∫ –†—É—Å—Å–∫–∏–π

Telegram-–±–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä—É–ø–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ ("–∫–∏—Ç–æ–≤") –Ω–∞ [Polymarket](https://polymarket.com) –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–¥–µ–ª–æ–∫** –æ—Ç $500 –¥–æ $100,000+
- üí∞ **–§–∏–ª—å—Ç—Ä –ø–æ —Å—É–º–º–µ** ‚Äî –≤—ã–±–µ—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥
- üìÇ **–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º** ‚Äî –ö—Ä–∏–ø—Ç–æ, –°–ø–æ—Ä—Ç, –û—Å—Ç–∞–ª—å–Ω–æ–µ
- ‚öñÔ∏è **–§–∏–ª—å—Ç—Ä –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏** ‚Äî –∏—Å–∫–ª—é—á–∞–µ—Ç –ø–æ—á—Ç–∏ —Ä–µ—à—ë–Ω–Ω—ã–µ —Ä—ã–Ω–∫–∏ (99.9%)
- üåê **–î–≤—É—è–∑—ã—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** ‚Äî –†—É—Å—Å–∫–∏–π / English
- üîó **–°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å —Ç—Ä–µ–π–¥–µ—Ä–∞** –∏ —Ä—ã–Ω–æ–∫

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—ä—ë–º–æ–≤

| –≠–º–æ–¥–∑–∏ | –£—Ä–æ–≤–µ–Ω—å | –°—É–º–º–∞ |
|--------|---------|-------|
| üî• | –ú–µ–≥–∞ –ö–∏—Ç | >$100,000 |
| ‚ö° | –°—É–ø–µ—Ä –ö–∏—Ç | >$50,000 |
| üêã | –ö–∏—Ç | >$25,000 |
| ü¶à | –ê–∫—É–ª–∞ | >$10,000 |
| üê¨ | –î–µ–ª—å—Ñ–∏–Ω | >$5,000 |
| üêü | –†—ã–±–∞ | >$2,000 |
| ü¶ê | –ö—Ä–µ–≤–µ—Ç–∫–∞ | >$500 |

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (PolymarketService)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π **Polymarket Data API** (`data-api.polymarket.com`).
- **–ú–µ—Ç–æ–¥:** –ë–æ—Ç **–æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç (polling)** API –∫–∞–∂–¥—ã–µ **3 —Å–µ–∫—É–Ω–¥—ã**.
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –≤—Ö–æ–¥–µ:** –ó–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–¥–µ–ª–∫–∏ —Ç–∏–ø–∞ `CASH` –Ω–∞ —Å—É–º–º—É –æ—Ç **$10** (—á—Ç–æ–±—ã –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –¥–∞–∂–µ –º–µ–ª–∫–∏–µ —á–∞—Å—Ç–∏ –∫—Ä—É–ø–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤).

#### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ê–≥—Ä–µ–≥–∞—Ü–∏—è (Aggregation)
–û–¥–Ω–∞ –∫—Ä—É–ø–Ω–∞—è —Å–¥–µ–ª–∫–∞ –Ω–∞ Polymarket —á–∞—Å—Ç–æ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ–ª–∫–∏—Ö –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–π (fills). –ß—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –æ –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏, –±–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ —Å–µ—Ä–∏–∏.
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:** –°–¥–µ–ª–∫–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ —Å–µ—Ä–∏—é, –µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç:
  - –ö–æ—à–µ–ª–µ–∫ —Ç—Ä–µ–π–¥–µ—Ä–∞
  - –†—ã–Ω–æ–∫ (Condition ID)
  - –°—Ç–æ—Ä–æ–Ω–∞ (BUY/SELL)
  - –ò—Å—Ö–æ–¥ (YES/NO/Outcome Index)
- **–û–∫–Ω–æ –≤—Ä–µ–º–µ–Ω–∏:** –°–¥–µ–ª–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ **60 —Å–µ–∫—É–Ω–¥** —Å –º–æ–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏.
- **–ü–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:** –ï—Å–ª–∏ —Å—É–º–º–∞ —Å–µ—Ä–∏–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç **$500**, –æ–Ω–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–Ω–∞—á–∏–º–æ–π –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É.

#### 3. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∏ –•—Ä–∞–Ω–µ–Ω–∏–µ (Persistence)
–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ):
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ **SQLite** (`data/trades.db`), –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫.
- **–ö—ç—à:** –í –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–µ—Ä–∂–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10,000 —Å–¥–µ–ª–æ–∫ (LRU Cache) –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.
- **–û—á–∏—Å—Ç–∫–∞:** –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ (—Å—Ç–∞—Ä—à–µ 72 —á–∞—Å–æ–≤) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –±–∞–∑—ã.

#### 4. Telegram –ë–æ—Ç (TelegramService)
–ë–æ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–∞—Å—Å—ã–ª–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è:** –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–∏ —Ñ–∏–ª—å—Ç—Ä—ã:
  - **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞:** –æ—Ç $500 –¥–æ $100,000
  - **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:** –ö—Ä–∏–ø—Ç–æ, –°–ø–æ—Ä—Ç, –û—Å—Ç–∞–ª—å–Ω–æ–µ (–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º)
  - **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –õ—é–±–∞—è, 1%-99%, 5%-95%, 10%-90%
  - **–Ø–∑—ã–∫:** –†—É—Å—Å–∫–∏–π –∏–ª–∏ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
  - `üí∞ –°—É–º–º–∞ —Å–¥–µ–ª–∫–∏` ‚Äî –≤—ã–±–æ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞
  - `üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏` ‚Äî –≤—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä—ã–Ω–∫–æ–≤
  - `‚öñÔ∏è –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
  - `‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å / ‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ü—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å:
  - –≠–º–æ–¥–∑–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (üí∞, ‚öΩ, üìå) –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ä—ã–Ω–∫–∞
  - –¢–∏–ø–æ–º —Å–¥–µ–ª–∫–∏ (–ü–æ–∫—É–ø–∫–∞/–ü—Ä–æ–¥–∞–∂–∞) –∏ —Ü–µ–Ω–æ–π
  - –°—É–º–º–æ–π —Å–¥–µ–ª–∫–∏ (–¥–ª—è —Å–µ—Ä–∏–π –ø–∏—à–µ—Ç "Series X fills")
  - –£—Ä–æ–≤–Ω–µ–º "–∫–∏—Ç–∞" –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ç—Ä–µ–π–¥–µ—Ä–∞

#### 5. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- `/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞)
- `/users` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/broadcast <—Å–æ–æ–±—â–µ–Ω–∏–µ>` ‚Äî —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/ahdpe/PolymarketWhales.git
cd PolymarketWhales
pip install -r requirements.txt
```

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:
```
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

–ó–∞–ø—É—Å–∫:
```bash
python main.py
```

---

## üá¨üáß English

Telegram bot for real-time tracking of large trades ("whales") on [Polymarket](https://polymarket.com).

### Features

- üìä **Trade monitoring** from $500 to $100,000+
- üí∞ **Amount filter** ‚Äî choose minimum threshold
- üìÇ **Category filter** ‚Äî Crypto, Sports, Other
- ‚öñÔ∏è **Probability filter** ‚Äî excludes near-resolved markets (99.9%)
- üåê **Bilingual interface** ‚Äî Russian / English
- üîó **Links to trader profile** and market

### Volume Classification

| Emoji | Level | Amount |
|-------|-------|--------|
| üî• | Mega Whale | >$100,000 |
| ‚ö° | Super Whale | >$50,000 |
| üêã | Whale | >$25,000 |
| ü¶à | Shark | >$10,000 |
| üê¨ | Dolphin | >$5,000 |
| üêü | Fish | >$2,000 |
| ü¶ê | Shrimp | >$500 |

### How It Works

#### 1. Data Fetching (PolymarketService)
- **Source:** Uses public **Polymarket Data API** (`data-api.polymarket.com`).
- **Method:** Polls the API every **3 seconds**.
- **Input filtering:** Only `CASH` type trades from **$10** are requested (to capture small parts of large orders).

#### 2. Processing and Aggregation
A single large trade on Polymarket is often split into multiple small fills. To avoid spamming notifications, the bot groups them into series.
- **Grouping:** Trades are combined into a series if they match:
  - Trader wallet
  - Market (Condition ID)
  - Side (BUY/SELL)
  - Outcome (YES/NO/Outcome Index)
- **Time window:** Trades are collected within **60 seconds** from the first fill.
- **Trigger threshold:** If the series sum exceeds **$500**, it's considered significant.

#### 3. Deduplication and Persistence
To avoid duplicate notifications (e.g., on restart):
- **Database:** Local **SQLite** database (`data/trades.db`) stores unique keys of all processed trades.
- **Cache:** 10,000 most recent trades are kept in memory (LRU Cache) for instant lookup.
- **Cleanup:** Old records (older than 72 hours) are automatically deleted.

#### 4. Telegram Bot (TelegramService)
The bot interacts with users and sends notifications.
- **Personalization:** Each user can configure their filters:
  - **Minimum amount:** from $500 to $100,000
  - **Categories:** Crypto, Sports, Other (determined by keywords)
  - **Probability:** Any, 1%-99%, 5%-95%, 10%-90%
  - **Language:** Russian or English
- **Interface:**
  - `üí∞ Trade Amount` ‚Äî select minimum threshold
  - `üìÇ Categories` ‚Äî select market categories
  - `‚öñÔ∏è Probability` ‚Äî probability filter
  - `‚ñ∂Ô∏è Start / ‚è∏Ô∏è Stop` ‚Äî notification toggle
- **Notifications:** Sends message with:
  - Category emoji (üí∞, ‚öΩ, üìå) and market name
  - Trade type (Buy/Sell) and price
  - Trade amount (for series shows "Series X fills")
  - Whale level and link to trader

#### 5. Administration
- `/stats` ‚Äî bot statistics (owner only)
- `/users` ‚Äî user list
- `/broadcast <message>` ‚Äî broadcast to all users

### Installation

```bash
git clone https://github.com/ahdpe/PolymarketWhales.git
cd PolymarketWhales
pip install -r requirements.txt
```

Create `.env` file:
```
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

Run:
```bash
python main.py
```

---

## Tech Stack

- **Language:** Python 3.10+
- **Libraries:** aiogram, aiohttp, sqlite3
- **Config:** `.env` (tokens), `user_settings.json` (user preferences)

## License

MIT
